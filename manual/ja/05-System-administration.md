# システム管理

以下の章ではContaoの管理の方法を説明します。アプリケーションのインストールと更新に加えて、管理者はユーザーとグループの作成、追加モジュールの管理、システムの保守に関与します。


## ユーザーとグループ

Contaoは管理領域にログインできるバックエンドのユーザー("ユーザー")と、ウェブサイトにログインできるフロントエンドのユーザー("メンバー")を区別しています。管理者が初期設定ですべてのページと要素をアクセスできる("すべて許可")一方、通常ユーザーはそのプロフィールまたは所属するグループの1つのプロフィールで明示的に許可を受けていないリソースにはアクセスできません("すべて拒否")。


### ユーザー

それぞれのユーザーに複数のグループを関連付けることができて、関連付けたグループの権限を自動的に継承します。すべての権限は追加的で、所属するグループの権限の総和を継承することを意味します。グループAがある権利を与えている場合に、グループBで取り消すことはできません。


#### ページマウント

ページマウントは、ユーザーに見ることを許可するサイト構造のページを設定します。下の画面の例は、Helen Lewisさんが見るサイト構造です。ウェブサイトにはさらに多数のページがありますが、彼女は3つのページだけ見ることができます。これは、"Editors"グループの設定で"Course"のページだけがページマウントされているからです。Helen Lewisさんは3つのページを見ることができますが、その中の1つだけ編集できることに注意してください!

![](https://raw.github.com/contao/docs/3.0/manual/en/images/site-structure-hlewis.jpg)

ページを見えることに、そのページ(や、そのアーティクル)を編集する権利を含みません。サイト構造で[ページの権限][1]を設定することを覚えておいてください。ページをユーザーに許可するには、そのユーザーのプロフィールでページをマウントして、サイト構造でアクセス権を与えなければなりません。


#### ファイルマウント

ページマウントと同様に、ファイルマウントはユーザーが見ることを許可するフォルダーを設定します。下の画面の例はHelen Lewisさんが見るファイル管理です。彼女は"campus"のフォルダーだけ見ることができますが、管理者はファイルディレクトリ(`files`)全体を見ることができます。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/file-manager-hlewis.jpg)


#### 許可する項目

最初に説明しましたように、通常のユーザーは初期状態で権限をまったく持っていません("すべて拒否")が、これはフォームのどの欄にもアクセスできないという意味も含みます。例えばニュースのモジュールにアクセスを許可したとしても、新しい項目を作成するフォームは、管理者がグループの設定で`tl_news`テーブルの1つ以上の項目を有効にするまで空のままとなります。


![](https://raw.github.com/contao/docs/3.0/manual/en/images/allowed-fields.jpg)


### メンバー

メンバー(フロントエンドのユーザー)の管理は、ページマウントや許可する項目がないためバックエンドのユーザーの管理よりもずっと簡単です。メンバーの管理は主に保護したページのアクセス制御に必要で、グループの段階で実現されています。ウェブサイトの構成に依存して、登録済みのメンバーはゲストが利用できない保護したページやアクセス保護されたダウンロードを見ることができます。


## 機能拡張

機能拡張によって追加の機能性をContaoに追加できるので、Contaoには欠かせない部分と言えます。現在、1400の機能拡張を、Contao機能拡張リポジトリから利用可能でバックエンドから直接閲覧できます。リポジトリのサーバーとの間の通信はSOAPによって行っているため、サービスを利用するにはPHPのSOAP拡張を(初期状態で有効でないなら)有効にしなければなりません。


### 機能拡張カタログ

"機能拡張カタログ"のモジュールを使用すると機能拡張のリストの閲覧と、ボタンを押して機能拡張をインストールできます。特定の機能拡張を探すには、フィルターと並べ替えのオプションを使用し、アイコンか機能拡張の名前をクリックして詳細なページを開いて、モジュールをインストールしてください。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/extension-list.jpg)

詳細なページには機能拡張の説明と、システムの必要条件、バージョン、他のモジュールの依存関係といった詳細な情報があります。ダウンロードと機能拡張をインストールするには"インストール"のボタンをクリックしてください。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/extension-details.jpg)

Contaoは自動的に機能拡張のダウンロードとインストールを行い、必要であればデータベースを更新します。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/extension-install.jpg)


### 機能拡張管理

"機能拡張管理"のモジュールから機能拡張の更新とアンインストールを行えます。自動的に更新がないか確認して、新しいバージョンがあれば通知します。多数の機能拡張にはオンラインマニュアルとサポートを受けられるフォーラムのスレッドの両方、またはその一方のリンクがあります。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/extension-manager.jpg)

機能拡張をアンインストールするには、単にアンインストールのアイコンをクリックして指示に従ってください。機能拡張管理はすべてのファイルとフォルダーを削除して、必要ならデータベースを更新します。この動作は取り消せず、テーブルも回復できないことに注意してください!

![](https://raw.github.com/contao/docs/3.0/manual/en/images/extension-uninstall.jpg)


### 手作業によるインストール

PHPのSOAP拡張がサーバーで利用できない場合、Contaoの機能拡張を手作業でインストールすることもできます。[機能拡張のリスト][2]から個別のモジュールを探して最新のリリースの.zipアーカイブをダウンロードしてください。それからファイルを展開して、展開したファイルをローカルまたはリモートのContaoのディレクトリにコピーしてください。最後に[Contaoインストールツール][3]でデータベースを確認してください。


## 保守

Contaoの保守作業のほとんどは定期的なコマンドスケジューラーによって定期的に実行されますから、実際の作業に集中できます。保守モジュールの仕事さえも自動的に実行されますが、時々はそれらを手作業で起動することも必要でしょう。


### データの消去

ユーザーが生成したコンテンツに加えてContaoは様々なシステムのデータを保持していて、削除したレコードの復元したり、以前のバージョンに戻したり、ウェブサイトを検索したり、ページの読み込み時間を減らしたり、といったことに使用しています。このデータは手作業で消去でき、例えば画像キャッシュから古いサムネイルの削除や、サイト構造を修正した跡でXMLのサイトマップを再作成を行えます。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/purge-data.jpg)


### 検索インデックスの再構築

ページはフロントエンドで表示されるときに(同時にバックエンドにログインしていなければ)、ページは通常は自動的に検索インデックスに追加されますので、検索インデックスについて心配する必要はありません。しかし、多数のページを変更した場合、ブラウザーでページを1つずつ表示する代わりに、一度に更新できた方が便利です。この場合、検索インデックスを手作業で再構築できます。

![](https://raw.github.com/contao/docs/3.0/manual/en/images/rebuild-the-search-index.jpg)


[1]: 03-Managing-pages.md#access-control
[2]: https://contao.org/en/extension-list.html
[3]: 01-Installation.md#the-contao-install-tool
